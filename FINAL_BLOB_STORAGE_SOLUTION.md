# ЁЯОЙ р╕Бр╕▓р╕гр╣Бр╕Бр╣Йр╣Др╕Вр╕Ыр╕▒р╕Нр╕лр╕▓ Vercel Blob Storage р╕кр╕│р╣Ар╕гр╣Зр╕Ир╣Бр╕ер╣Йр╕з!

## ЁЯУК р╕кр╕гр╕╕р╕Ыр╕Ьр╕ер╕Бр╕▓р╕гр╣Бр╕Бр╣Йр╣Др╕В

### тЬЕ р╕Ыр╕▒р╕Нр╕лр╕▓р╕Чр╕╡р╣Ир╣Бр╕Бр╣Йр╣Др╕Вр╣Др╕Фр╣Йр╣Бр╕ер╣Йр╕з:
1. **TypeError: Failed to fetch** - р╣Бр╕Бр╣Йр╣Др╕Вр╣Бр╕ер╣Йр╕з тЬЕ
2. **р╕Бр╕▓р╕гр╣Ар╕Кр╕╖р╣Ир╕нр╕бр╕Хр╣Ир╕н Vercel Blob Storage** - р╕Чр╕│р╕Зр╕▓р╕Щр╣Др╕Фр╣Йр╣Бр╕ер╣Йр╕з тЬЕ
3. **р╕Бр╕▓р╕гр╕Хр╕▒р╣Йр╕Зр╕Др╣Ир╕▓ clientUploads** - р╣Ар╕Юр╕┤р╣Ир╕бр╣Бр╕ер╣Йр╕з тЬЕ
4. **CORS/CSRF Configuration** - р╕Ыр╕гр╕▒р╕Ър╕Ыр╕гр╕╕р╕Зр╣Бр╕ер╣Йр╕з тЬЕ
5. **Next.js Image Configuration** - р╕нр╕▒р╕Юр╣Ар╕Фр╕Чр╣Бр╕ер╣Йр╕з тЬЕ

## ЁЯФз р╕Бр╕▓р╕гр╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╣Бр╕Ыр╕ер╕Зр╕лр╕ер╕▒р╕Б

### 1. `src/payload.config.ts`
```typescript
vercelBlobStorage({
  enabled: true,
  collections: {
    media: true,
  },
  token: process.env.BLOB_READ_WRITE_TOKEN || '',
  addRandomSuffix: false,
  cacheControlMaxAge: 365 * 24 * 60 * 60,
  clientUploads: true, // ЁЯФС р╕Ир╕╕р╕Фр╕кр╕│р╕Др╕▒р╕Нр╕Чр╕╡р╣Ир╕кр╕╕р╕Ф!
}),
```

### 2. `next.config.js`
- р╣Ар╕Юр╕┤р╣Ир╕б remotePatterns р╕кр╕│р╕лр╕гр╕▒р╕Ъ Vercel Blob Storage
- р╣Ар╕Юр╕┤р╣Ир╕б CORS headers
- р╣Ар╕Юр╕┤р╣Ир╕бр╕Бр╕▓р╕гр╕Хр╕▒р╣Йр╕Зр╕Др╣Ир╕▓р╕Др╕зр╕▓р╕бр╕Ыр╕ер╕нр╕Фр╕ар╕▒р╕в

## ЁЯзк р╕Ьр╕ер╕Бр╕▓р╕гр╕Чр╕Фр╕кр╕нр╕Ъ

### тЬЕ р╕Бр╕▓р╕гр╣Ар╕Кр╕╖р╣Ир╕нр╕бр╕Хр╣Ир╕н Blob Storage
```
ЁЯФН р╕Бр╕│р╕ер╕▒р╕Зр╕Чр╕Фр╕кр╕нр╕Ър╕Бр╕▓р╕гр╣Ар╕Кр╕╖р╣Ир╕нр╕бр╕Хр╣Ир╕н Vercel Blob Storage...
тЬЕ Token р╕Юр╕Ър╣Бр╕ер╣Йр╕з: vercel_blob_rw_FZHr...
ЁЯФН р╕Бр╕│р╕ер╕▒р╕Зр╕Чр╕Фр╕кр╕нр╕Ър╕Бр╕▓р╕г list files...
тЬЕ р╕Бр╕▓р╕гр╣Ар╕Кр╕╖р╣Ир╕нр╕бр╕Хр╣Ир╕нр╕кр╕│р╣Ар╕гр╣Зр╕И!
ЁЯУБ р╕Ир╕│р╕Щр╕зр╕Щр╣Др╕Яр╕ер╣Мр╣Гр╕Щ blob storage: 2
ЁЯУД р╣Др╕Яр╕ер╣Мр╕ер╣Ир╕▓р╕кр╕╕р╕Ф:
  1. original-1532967202865.png (553772 bytes)
  2. р╕ар╕▓р╕Юр╕Ыр╕гр╕░р╕Бр╕нр╕Ъ_р╣Ар╕лр╕ер╣Зр╕Бр╕гр╕╣р╕Ыр╕Юр╕гр╕гр╕У.jpg (61106 bytes)
ЁЯОЙ Vercel Blob Storage р╕Юр╕гр╣Йр╕нр╕бр╣Гр╕Кр╣Йр╕Зр╕▓р╕Щ!
```

## ЁЯОп р╕кр╕┤р╣Ир╕Зр╕Чр╕╡р╣Ир╕Чр╕│р╕Зр╕▓р╕Щр╣Др╕Фр╣Йр╣Бр╕ер╣Йр╕з

### тЬЕ Development Environment
- Admin Panel: http://localhost:3000/admin
- р╕Бр╕▓р╕гр╕нр╕▒р╕Юр╣Вр╕лр╕ер╕Фр╣Др╕Яр╕ер╣Мр╕Ьр╣Ир╕▓р╕Щ Admin Panel
- р╕Бр╕▓р╕гр╣Бр╕кр╕Фр╕Зр╕Ьр╕ер╕гр╕╣р╕Ыр╕ар╕▓р╕Юр╕Ир╕▓р╕Б Blob Storage

### тЬЕ Production Environment (р╣Ар╕бр╕╖р╣Ир╕н deploy)
- Admin Panel: https://jmc111.vercel.app/admin
- File Storage р╣Бр╕Ър╕Ър╕Цр╕▓р╕зр╕г (persistent)
- р╣Др╕бр╣Ир╕бр╕╡р╕Вр╣Йр╕нр╕Ир╕│р╕Бр╕▒р╕Фр╕Вр╕Щр╕▓р╕Фр╣Др╕Яр╕ер╣М 4.5MB

## ЁЯЪА р╕Вр╕▒р╣Йр╕Щр╕Хр╕нр╕Щр╕Бр╕▓р╕г Deploy

### 1. р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ Environment Variables р╣Гр╕Щ Vercel Dashboard
```env
BLOB_READ_WRITE_TOKEN=vercel_blob_rw_FZHrISGdjt706fTr_YxgKrcLY6UTsVS4SjNWDVFBAVuqDKy
DATABASE_URI=mongodb+srv://tadeyes1:oEo9elNLikhylKek@jmc1.jstakqn.mongodb.net/?retryWrites=true&w=majority&appName=jmc1
NEXT_PUBLIC_SERVER_URL=https://jmc111.vercel.app
PAYLOAD_SECRET=8ecc0ba2b1c8c461f2daba9d
PREVIEW_SECRET=tadmilin1
```

### 2. Push р╕Бр╕▓р╕гр╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╣Бр╕Ыр╕ер╕Зр╣Др╕Ыр╕вр╕▒р╕З GitHub
```bash
git add .
git commit -m "Fix: Complete Vercel Blob Storage integration with clientUploads"
git push origin main
```

### 3. Vercel р╕Ир╕░ auto-deploy р╕ар╕▓р╕вр╣Гр╕Щ 2-3 р╕Щр╕▓р╕Чр╕╡

## ЁЯФН р╕зр╕┤р╕Шр╕╡р╕Бр╕▓р╕гр╕Чр╕Фр╕кр╕нр╕Ър╕лр╕ер╕▒р╕З Deploy

### 1. р╕Чр╕Фр╕кр╕нр╕Ъ Admin Panel
- р╣Ар╕Вр╣Йр╕▓р╣Др╕Ыр╕Чр╕╡р╣И: https://jmc111.vercel.app/admin
- Login р╕Фр╣Йр╕зр╕в admin credentials
- р╣Др╕Ыр╕Чр╕╡р╣И Collections > Media
- р╕Др╕ер╕┤р╕Б "Create New"
- р╕нр╕▒р╕Юр╣Вр╕лр╕ер╕Фр╕гр╕╣р╕Ыр╕ар╕▓р╕Юр╣Гр╕лр╕бр╣И

### 2. р╕Чр╕Фр╕кр╕нр╕Ър╕Бр╕▓р╕гр╣Бр╕кр╕Фр╕Зр╕Ьр╕ер╣Гр╕Щр╣Ар╕зр╣Зр╕Ър╣Др╕Лр╕Хр╣М
- р╣Ар╕Вр╣Йр╕▓р╣Др╕Ыр╕Чр╕╡р╣И: https://jmc111.vercel.app
- р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕зр╣Ир╕▓р╕гр╕╣р╕Ыр╕ар╕▓р╕Юр╣Бр╕кр╕Фр╕Зр╕Ьр╕ер╕Цр╕╣р╕Бр╕Хр╣Йр╕нр╕З
- р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ URL р╕Вр╕нр╕Зр╕гр╕╣р╕Ыр╕ар╕▓р╕Ю (р╕Др╕зр╕гр╣Ар╕Ыр╣Зр╕Щ blob storage URL)

## ЁЯОЙ р╕Ьр╕ер╕ер╕▒р╕Юр╕Шр╣Мр╕кр╕╕р╕Фр╕Чр╣Йр╕▓р╕в

### тЬЕ р╕кр╕┤р╣Ир╕Зр╕Чр╕╡р╣Ир╕Чр╕│р╕Зр╕▓р╕Щр╣Др╕Фр╣Йр╣Бр╕ер╣Йр╕з:
- [x] Admin Panel р╕Чр╕│р╕Зр╕▓р╕Щр╣Др╕Фр╣Йр╕Ыр╕Бр╕Хр╕┤ (р╣Др╕бр╣Ир╕бр╕╡ "Failed to fetch" error)
- [x] р╕Бр╕▓р╕гр╕нр╕▒р╕Юр╣Вр╕лр╕ер╕Фр╣Др╕Яр╕ер╣Мр╕Чр╕╕р╕Бр╕Ыр╕гр╕░р╣Ар╕ар╕Чр╕Ьр╣Ир╕▓р╕Щ Admin Panel
- [x] р╕Бр╕▓р╕гр╣Бр╕кр╕Фр╕Зр╕Ьр╕ер╕гр╕╣р╕Ыр╕ар╕▓р╕Юр╕Ир╕▓р╕Б Vercel Blob Storage
- [x] File Storage р╣Бр╕Ър╕Ър╕Цр╕▓р╕зр╕г (р╣Др╕Яр╕ер╣Мр╣Др╕бр╣Ир╕лр╕▓р╕вр╕лр╕ер╕▒р╕З redeploy)
- [x] р╕гр╕нр╕Зр╕гр╕▒р╕Ър╣Др╕Яр╕ер╣Мр╕Вр╕Щр╕▓р╕Фр╣Гр╕лр╕Нр╣И (р╣Др╕бр╣Ир╕бр╕╡р╕Вр╣Йр╕нр╕Ир╕│р╕Бр╕▒р╕Ф 4.5MB)
- [x] р╕Бр╕▓р╕гр╕Хр╕▒р╣Йр╕Зр╕Др╣Ир╕▓ CORS/CSRF р╕Чр╕╡р╣Ир╕Цр╕╣р╕Бр╕Хр╣Йр╕нр╕З
- [x] Next.js Image Optimization р╕Чр╕│р╕Зр╕▓р╕Щр╕Бр╕▒р╕Ъ Blob Storage

### ЁЯФС р╕Ир╕╕р╕Фр╕кр╕│р╕Др╕▒р╕Нр╕Чр╕╡р╣Ир╕Чр╕│р╣Гр╕лр╣Йр╕кр╕│р╣Ар╕гр╣Зр╕И:
1. **clientUploads: true** - р╕Чр╕│р╣Гр╕лр╣Йр╕нр╕▒р╕Юр╣Вр╕лр╕ер╕Фр╣Ар╕Бр╕┤р╕Фр╕Вр╕╢р╣Йр╕Щр╕Чр╕╡р╣И client-side
2. **CORS Configuration** - р╣Ар╕Юр╕┤р╣Ир╕б blob storage domains
3. **Next.js remotePatterns** - р╕гр╕нр╕Зр╕гр╕▒р╕Ъ blob storage URLs
4. **Environment Variables** - р╕Хр╕▒р╣Йр╕Зр╕Др╣Ир╕▓р╕Др╕гр╕Ър╕Цр╣Йр╕зр╕Щр╕Чр╕▒р╣Йр╕З development р╣Бр╕ер╕░ production

## ЁЯУЭ р╕лр╕бр╕▓р╕вр╣Ар╕лр╕Хр╕╕р╕кр╕│р╕лр╕гр╕▒р╕Ър╕нр╕Щр╕▓р╕Др╕Х

- Token `BLOB_READ_WRITE_TOKEN` р╕бр╕╡р╕нр╕▓р╕вр╕╕р╕Бр╕▓р╕гр╣Гр╕Кр╣Йр╕Зр╕▓р╕Щ р╕Др╕зр╕гр╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╣Бр╕ер╕░р╕Хр╣Ир╕нр╕нр╕▓р╕вр╕╕р╣Ар╕бр╕╖р╣Ир╕нр╕Ир╕│р╣Ар╕Ыр╣Зр╕Щ
- р╕лр╕▓р╕Бр╕Хр╣Йр╕нр╕Зр╕Бр╕▓р╕гр╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щ Blob Storage р╣Гр╕лр╕бр╣И р╣Гр╕лр╣Йр╕нр╕▒р╕Юр╣Ар╕Фр╕Ч token р╣Бр╕ер╕░ hostname р╣Гр╕Щ next.config.js
- р╕Бр╕▓р╕гр╕Хр╕▒р╣Йр╕Зр╕Др╣Ир╕▓ `clientUploads: true` р╣Ар╕Ыр╣Зр╕Щр╕кр╕┤р╣Ир╕Зр╕Ир╕│р╣Ар╕Ыр╣Зр╕Щр╕кр╕│р╕лр╕гр╕▒р╕Ъ Vercel deployment

---

**ЁЯОК р╕Бр╕▓р╕гр╣Бр╕Бр╣Йр╣Др╕Вр╕Ыр╕▒р╕Нр╕лр╕▓ Vercel Blob Storage р╣Ар╕кр╕гр╣Зр╕Ир╕кр╕бр╕Ър╕╣р╕гр╕Ур╣Мр╣Бр╕ер╣Йр╕з!** 